



<!doctype html>
<html lang="en" class="no-js">
<head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description"
          content="Predator manages the lifecycle of load-testing APIs, from creating the tests, to running them on a scheduled and on-demand, and viewing the results in real time">
    <meta name="keywords"
          content="performance testing api,load testing api,blazemeter,jmeter,performance testing tools,load testing tools,load test,kuberntes,dcos,docker,stress,api">
    <meta name="author" content="ZOOZ">
    
    <meta name="lang:clipboard.copy" content="Copy to clipboard">
    
    <meta name="lang:clipboard.copied" content="Copied to clipboard">
    
    <meta name="lang:search.language" content="en">
    
    <meta name="lang:search.pipeline.stopwords" content="True">
    
    <meta name="lang:search.pipeline.trimmer" content="True">
    
    <meta name="lang:search.result.none" content="No matching documents">
    
    <meta name="lang:search.result.one" content="1 matching document">
    
    <meta name="lang:search.result.other" content="# matching documents">
    
    <meta name="lang:search.tokenizer" content="[\s\-]+">
    
    <link rel="shortcut icon" href="assets/images/favicon.png">
    <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    

    <title>Predator - Distributed performance testing platform</title>

    
    <link rel="stylesheet" href="assets/stylesheets/application.3020aac5.css">
    
    
    
    
    <script src="assets/javascripts/modernizr.74668098.js"></script>
    
    
    
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
    <style>body, input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
    }

    code, kbd, pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
    }</style>
    
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
    
    
    
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-40865650-4", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
    
    
    
</head>

<body dir="ltr">

<svg class="md-svg">
    <defs>
        
        
        <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
    </defs>
</svg>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>

<a href="#use-cases" tabindex="1" class="md-skip">
    Skip to content
</a>


<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://predator.dev" title="Predator" class="md-header-nav__button md-logo">
          <img src="https://zooz.github.io/predator/images/logo.png" width="60" height="30">
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Predator
            </span>
            <span class="md-header-nav__topic">
              Processor Creation
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/Zooz/predator/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>

<div class="md-container">
    
    
    
    
    <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
            
            
            <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                    <div class="md-sidebar__inner">
                        <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://predator.dev" title="Predator" class="md-nav__button md-logo">
      <img src="https://zooz.github.io/predator/images/logo.png" width="60" height="30">
    </a>
    Predator
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/Zooz/predator/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="about.html" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="installation.html" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="myfirsttest.html" title="My First Test" class="md-nav__link">
      My First Test
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="tests.html" title="Advanced Test Setup" class="md-nav__link">
      Advanced Test Setup
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="functionalandassertions.html" title="Functional Tests and Assertions" class="md-nav__link">
      Functional Tests and Assertions
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Processor Creation
      </label>
    
    <a href="processors.html" title="Processor Creation" class="md-nav__link md-nav__link--active">
      Processor Creation
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-cases" title="Use-cases" class="md-nav__link">
    Use-cases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-processor" title="Creating a processor" class="md-nav__link">
    Creating a processor
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template" title="Template" class="md-nav__link">
    Template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" title="Description" class="md-nav__link">
    Description
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#beforescenariocontext-ee-next" title="beforeScenario(context, ee, next)" class="md-nav__link">
    beforeScenario(context, ee, next)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#afterscenariocontext-ee-next" title="afterScenario(context, ee, next)" class="md-nav__link">
    afterScenario(context, ee, next)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beforerequestrequestparams-context-ee-next" title="beforeRequest(requestParams, context, ee, next)" class="md-nav__link">
    beforeRequest(requestParams, context, ee, next)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#afterresponserequestparams-response-context-ee-next" title="afterResponse(requestParams, response, context, ee, next)" class="md-nav__link">
    afterResponse(requestParams, response, context, ee, next)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case-examples" title="Use case examples:" class="md-nav__link">
    Use case examples:
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-prerequistes-for-a-request" title="1. Prerequistes for a request" class="md-nav__link">
    1. Prerequistes for a request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-random-data-generation" title="2. Random data generation" class="md-nav__link">
    2. Random data generation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-response-logging" title="3. Response logging" class="md-nav__link">
    3. Response logging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-in-a-test" title="Using in a test" class="md-nav__link">
    Using in a test
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario" title="Scenario" class="md-nav__link">
    Scenario
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-request" title="Step (request)" class="md-nav__link">
    Step (request)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="benchmarks.html" title="Benchmarks" class="md-nav__link">
      Benchmarks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="webhooks.html" title="Webhooks" class="md-nav__link">
      Webhooks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="schedulesandreports.html" title="Schedules and Reports" class="md-nav__link">
      Schedules and Reports
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="plugins.html" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="configuration.html" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="performance.html" title="Runner's Performance" class="md-nav__link">
      Runner's Performance
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="faq.html" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="contributing.html" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="apireference.html" title="API Reference" class="md-nav__link">
      API Reference
    </a>
  </li>

    
  </ul>
</nav>
                    </div>
                </div>
            </div>
            
            
            <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                    <div class="md-sidebar__inner">
                        
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-cases" title="Use-cases" class="md-nav__link">
    Use-cases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-processor" title="Creating a processor" class="md-nav__link">
    Creating a processor
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template" title="Template" class="md-nav__link">
    Template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" title="Description" class="md-nav__link">
    Description
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#beforescenariocontext-ee-next" title="beforeScenario(context, ee, next)" class="md-nav__link">
    beforeScenario(context, ee, next)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#afterscenariocontext-ee-next" title="afterScenario(context, ee, next)" class="md-nav__link">
    afterScenario(context, ee, next)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beforerequestrequestparams-context-ee-next" title="beforeRequest(requestParams, context, ee, next)" class="md-nav__link">
    beforeRequest(requestParams, context, ee, next)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#afterresponserequestparams-response-context-ee-next" title="afterResponse(requestParams, response, context, ee, next)" class="md-nav__link">
    afterResponse(requestParams, response, context, ee, next)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case-examples" title="Use case examples:" class="md-nav__link">
    Use case examples:
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-prerequistes-for-a-request" title="1. Prerequistes for a request" class="md-nav__link">
    1. Prerequistes for a request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-random-data-generation" title="2. Random data generation" class="md-nav__link">
    2. Random data generation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-response-logging" title="3. Response logging" class="md-nav__link">
    3. Response logging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-in-a-test" title="Using in a test" class="md-nav__link">
    Using in a test
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario" title="Scenario" class="md-nav__link">
    Scenario
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-request" title="Step (request)" class="md-nav__link">
    Step (request)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                    </div>
                </div>
            </div>
            
            
            <div class="md-content">
                <article class="md-content__inner md-typeset">
                    
                    
                    <a href="https://github.com/Zooz/predator/blob/master/docs/devguide/docs/processors.md" title="Edit this page"
                       class="md-icon md-content__icon">&#xE3C9;</a>
                    
                    
                    <h1>Processor Creation</h1>
                    
                    <div class="admonition tip">
<p class="admonition-title">Supported from version zooz/predator:1.2.0</p>
</div>
<p>Use <code>processors</code> to inject custom JavaScript into the test flows. This allows the test flow to be as flexible as possible by creating application resources along the way that are needed for future requests or flow processing.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Processors allow you to create anything that's possible in JavaScript and integrate it seemlessly into your test flow.</strong></p>
</div>
<h2 id="use-cases">Use-cases<a class="headerlink" href="#use-cases" title="Permanent link">#</a></h2>
<p>There are many use-cases for injecting custom JavaScript into your test flow. Some include:</p>
<ol>
<li><strong>Prerequistes for a request</strong> <ul>
<li>Create resources needed for an API request, such as an authentication token, that shouldn't be calculated into the report's response times for the overall test flow.
 <br><u><a href="#1-prerequistes-for-a-request"><em>Example</em></a></u></li>
</ul>
</li>
<li><strong>Random data generation</strong> <ul>
<li>Generate random data to send in your request bodies
 <br><u><a href="#2-random-data-generation"><em>Example</em></a></u></li>
</ul>
</li>
<li><strong>Response logging</strong> <ul>
<li>Log errors if exist
 <br><u><a href="#3-response-logging"><em>Example</em></a></u></li>
</ul>
</li>
</ol>
<h2 id="creating-a-processor">Creating a processor<a class="headerlink" href="#creating-a-processor" title="Permanent link">#</a></h2>
<p>Creating a processor can be easily done through the Predator UI. An initial template is provided but it is not required to follow it, we recommend using appropriate function names in order to make it easier to import them into your tests. </p>
<div class="admonition note">
<p class="admonition-title">Extra documentation</p>
<p>In order to read more documentation regarding how processors are used in artillery tests, 
please refer to the <u><a href="https://artillery.io/docs/http-reference/#advanced-writing-custom-logic-in-javascript">artillery docs</a></u>.</p>
</div>
<p><img alt="Screenshot" src="images/createprocessor.png" /></p>
<h3 id="template">Template<a class="headerlink" href="#template" title="Permanent link">#</a></h3>
<div class="codehilite"><pre><span></span><span class="kr">module</span><span class="nx">.exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">beforeScenario</span><span class="p">,</span>
    <span class="nx">afterScenario</span><span class="p">,</span>
    <span class="nx">beforeRequest</span><span class="p">,</span>
    <span class="nx">afterResponse</span>
<span class="p">};</span>
<span class="kd">function</span> <span class="nx">beforeScenario</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">afterScenario</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">beforeRequest</span><span class="p">(</span><span class="nx">requestParams</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">afterResponse</span><span class="p">(</span><span class="nx">requestParams</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>
</pre></div>

<h3 id="description">Description<a class="headerlink" href="#description" title="Permanent link">#</a></h3>
<p>Since Predator uses Artillery's built-in processor functionality, there are 4 instances where the processor's Javascript code can be executed.</p>
<h4 id="beforescenariocontext-ee-next">beforeScenario(context, ee, next)<a class="headerlink" href="#beforescenariocontext-ee-next" title="Permanent link">#</a></h4>
<p>These functions will be executed <strong>once</strong> before a scenario. All before scenarios functions must adhere to the <code>(context, ee, next)</code> parameters in their function signature.</p>
<h4 id="afterscenariocontext-ee-next">afterScenario(context, ee, next)<a class="headerlink" href="#afterscenariocontext-ee-next" title="Permanent link">#</a></h4>
<p>These functions will be executed <strong>once</strong> after a scenario. All after scenarios functions must adhere to the <code>(context, ee, next)</code> parameters in their function signature.</p>
<h4 id="beforerequestrequestparams-context-ee-next">beforeRequest(requestParams, context, ee, next)<a class="headerlink" href="#beforerequestrequestparams-context-ee-next" title="Permanent link">#</a></h4>
<p>These functions will be executed <strong>once</strong> before a specific request. All before requests functions must adhere to the <code>(requestParams, context, ee, next)</code> parameters in their function signature.</p>
<h4 id="afterresponserequestparams-response-context-ee-next">afterResponse(requestParams, response, context, ee, next)<a class="headerlink" href="#afterresponserequestparams-response-context-ee-next" title="Permanent link">#</a></h4>
<p>These functions will be executed <strong>once</strong> after a specific request. All after response functions must adhere to the <code>(requestParams, response, context, ee, next)</code> parameters in their function signature.</p>
<h3 id="use-case-examples">Use case examples:<a class="headerlink" href="#use-case-examples" title="Permanent link">#</a></h3>
<h4 id="1-prerequistes-for-a-request">1. <strong>Prerequistes for a request</strong><a class="headerlink" href="#1-prerequistes-for-a-request" title="Permanent link">#</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;uuid/v4&#39;</span><span class="p">);</span>
<span class="kr">module</span><span class="nx">.exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">createAuthToken</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">createAuthToken</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">vars</span><span class="p">.</span><span class="nx">token</span> <span class="o">=</span> <span class="nx">uuid</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>
</pre></div>

<h4 id="2-random-data-generation">2. <strong>Random data generation</strong><a class="headerlink" href="#2-random-data-generation" title="Permanent link">#</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">module</span><span class="nx">.exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">generateRandomName</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">generateRandomName</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">vars</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;random_name_&#39;</span> <span class="o">+</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>
</pre></div>

<h4 id="3-response-logging">3. <strong>Response logging</strong><a class="headerlink" href="#3-response-logging" title="Permanent link">#</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">module</span><span class="nx">.exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">logErrorByStatusCode</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">logErrorByStatusCode</span><span class="p">(</span><span class="nx">requestParams</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">&gt;=</span> <span class="mi">300</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`**************** fail with status code: </span><span class="si">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`**************** response body: </span><span class="si">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`**************** response headers is: </span><span class="si">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`**************** request body: </span><span class="si">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">requestParams</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>
</pre></div>

<h2 id="using-in-a-test">Using in a test<a class="headerlink" href="#using-in-a-test" title="Permanent link">#</a></h2>
<p>In order to load a processor into a test, choose a processor from the list <code>Processor</code> in the create/edit test screen. 
The exported functions from the processor will dynamically load into the <code>Before Scenario</code>, <code>After Scenario</code>, <code>Before Request</code>, <code>After Request</code>
dropdown menus.</p>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link">#</a></h3>
<p>In this example, we loaded a handleErrors processor with the following JavaScript:</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;uuid/v4&#39;</span><span class="p">);</span>
<span class="kr">module</span><span class="nx">.exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">throwErrorOnError</span><span class="p">,</span> <span class="nx">logResponseOnError</span><span class="p">,</span> <span class="nx">beforeRequest</span><span class="p">,</span> <span class="nx">afterResponse</span><span class="p">,</span> <span class="nx">afterScenario</span><span class="p">,</span> <span class="nx">beforeScenario</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">beforeRequest</span><span class="p">(</span><span class="nx">requestParams</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;before request&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">afterResponse</span><span class="p">(</span><span class="nx">requestParams</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;after response&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">afterScenario</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;after scenario&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">beforeScenario</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;before scenario&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">throwErrorOnError</span><span class="p">(</span><span class="nx">requestParams</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;**************** fail with status code: &#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">));</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;**************** host is: &#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">uri</span><span class="p">.</span><span class="nx">host</span><span class="p">));</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;**************** path is: &#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">uri</span><span class="p">.</span><span class="nx">pathname</span><span class="p">));</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;**************** response headers is: &#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">));</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Stopping test&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">logResponseOnError</span><span class="p">(</span><span class="nx">requestParams</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">ee</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">!==</span> <span class="mi">200</span> <span class="o">||</span> <span class="nx">esponse</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">!==</span> <span class="mi">201</span> <span class="o">||</span> <span class="nx">esponse</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">!==</span> <span class="mi">204</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;**************** fail with status code: &#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">));</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;**************** host is: &#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">uri</span><span class="p">.</span><span class="nx">host</span><span class="p">));</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;**************** path is: &#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">uri</span><span class="p">.</span><span class="nx">pathname</span><span class="p">));</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;**************** response headers is: &#39;</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// MUST be called for the scenario to continue</span>
<span class="p">}</span>
</pre></div>

<h4 id="scenario">Scenario<a class="headerlink" href="#scenario" title="Permanent link">#</a></h4>
<p><img alt="Screenshot" src="images/create-test-with-processor.png" />
<i>beforeScenario and afterScenario functions will be executed before and after the scenario ends.</i> </p>
<h4 id="step-request">Step (request)<a class="headerlink" href="#step-request" title="Permanent link">#</a></h4>
<p><img alt="Screenshot" src="images/create-test-with-processor-step.png" />
<i>logResponseOnError will be executed after each request.</i></p>
                    
                    
                    
                    
                    
                    


                    
                </article>
            </div>
        </div>
    </main>
    
    
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="functionalandassertions.html" title="Functional Tests and Assertions" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Functional Tests and Assertions
              </span>
            </div>
          </a>
        
        
          <a href="benchmarks.html" title="Benchmarks" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Benchmarks
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
    
</div>

<script src="assets/javascripts/application.48c2c9de.js"></script>

<script>app.initialize({version: "1.0.4", url: {base: "."}})</script>


</body>
</html>